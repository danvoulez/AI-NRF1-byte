{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://schemas.ubl.agency/reasoning.bit.v1.json",
  "type": "object",
  "required": [
    "context_cid",
    "prompt_hash",
    "model",
    "judgment",
    "usage"
  ],
  "properties": {
    "context_cid": {
      "type": "string",
      "pattern": "^b3:[a-f0-9]{64}$"
    },
    "prompt_hash": {
      "type": "string",
      "pattern": "^[a-f0-9]{64}$"
    },
    "model": {
      "type": "string"
    },
    "judgment": {
      "type": "object",
      "required": [
        "verdict",
        "confidence",
        "reasoning"
      ],
      "properties": {
        "verdict": {
          "enum": [
            "PASS",
            "FAIL",
            "NEEDS_REVIEW"
          ]
        },
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "reasoning": {
          "type": "string"
        }
      }
    },
    "usage": {
      "type": "object",
      "properties": {
        "input_tokens": {
          "type": "integer",
          "minimum": 0
        },
        "output_tokens": {
          "type": "integer",
          "minimum": 0
        },
        "hrd_score": {
          "type": "number",
          "minimum": 0
        }
      }
    },
    "signature": {
      "type": "string"
    }
  }
}