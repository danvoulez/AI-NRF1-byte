# ===============================
# .env example — project-agnostic (Rust-first) com defaults prontos
# Duplique para `.env` e ajuste só o que precisar.
# ===============================

# ---------- Fluxo e turnos (semáforo) ----------
AGENT_ORDER=BUILDER,SENTINEL,REVIEWER
TRAFFIC_INITIAL=BUILDER
AGENT_SLEEP_INTERVAL=1
SEM_LOCK_DIR=.sem_lock
TRAFFIC_STATE_FILE=traffic/light.state

# Nomes (visuais)
BUILDER_NAME=BUILDER
SENTINEL_NAME=SENTINEL
REVIEWER_NAME=REVIEWER

# ---------- Skillbook (opcional) ----------
# Se você usa um Skillbook/Skill.md para descrever habilidades/limites dos agentes,
# aponte aqui. Ele será disponibilizado para Builder/Reviewer.
SKILL_MD_PATH=Skill.md

# ---------- Builder (faz o código) ----------
# Pré/pós comandos
BUILDER_PRE_CMD=echo "[Builder] start" && ls -la
# Ex.: gerar código ou aplicar mudanças (deixe vazio se não precisar)
# Exemplos (descomente UM):
# BUILDER_CMD=cargo run -q --bin codegen
# BUILDER_CMD=just gen
# BUILDER_CMD=python3 scripts/gen_from_blueprint.py
BUILDER_CMD=
BUILDER_POST_CMD=echo "[Builder] done"

# Git
BUILDER_GIT_ADD=true
BUILDER_GIT_COMMIT_MSG=feat: alterações do Builder (automático)
BUILDER_GIT_PUSH=true
BUILDER_GIT_BRANCH=

# ---------- Sentinel (gates determinísticos) ----------
# Prioridade:
# 1) TEST_CMD se definido
# 2) scripts/run_tests.sh
# 3) pula (sem erro) se nada existir
# Defaults pensados para Rust:
# - Tenta cargo-llvm-cov (se instalado), senão cargo test
TEST_CMD=
MIN_COVERAGE=0

# Semgrep (opcional; há regras para Rust, ajuste conforme seu projeto)
SENTINEL_SEMGREP_CONFIG=rules/semgrep/rules.yaml
SENTINEL_SEMGREP_FLAGS=--error

# OPA / Rego (opcional)
SENTINEL_OPA_QUERY=
SENTINEL_OPA_INPUT=blueprint.yaml
SENTINEL_OPA_DATABROKER=policies/opa

# ---------- Reviewer (análise de diff) ----------
# Reviewer padrão (Rust):
# 1) rustfmt --check
# 2) cargo clippy -D warnings
# Opcionalmente, rode também o heurístico Python no diff.
REVIEWER_CMD=bash scripts/review_rust.sh | tee review_report.md
REQUIRED_FN_PREFIX=bill_


# ---------- UI Strong (opcional) ----------
# Caminho do SKILL.md de UI
SKILL_UI_PATH=skills/ui-strong/SKILL.md
# URL para auditorias automáticas (axe, Lighthouse)
UI_A11Y_URL=
LHCI_URL=
# Reviewer de UI (descomente para usar em PRs de UI)
# REVIEWER_CMD=bash scripts/review_ui.sh | tee review_report.md


# Combos de reviewer (descomente um)
# REVIEWER_CMD=bash -lc 'scripts/review_ui.sh | tee review_report.md'
# REVIEWER_CMD=bash -lc 'scripts/review_ui.sh | tee review_report.md && scripts/review_rust.sh | tee -a review_report.md'
